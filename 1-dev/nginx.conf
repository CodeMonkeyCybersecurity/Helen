server {
    listen 80;
    server_name chickenj0.cloud;
    return 301 https://$host$request_uri; # Redirect HTTP to HTTPS
}

server {
    listen 443 ssl;
    server_name chickenj0.cloud;

    ssl_certificate /etc/nginx/certs/fullchain.pem;
    ssl_certificate_key /etc/nginx/certs/privkey.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    location / {
        root /usr/share/nginx/html; 
        index index.html;
   }
}
stream {
   upstream master {
       server chickenj0.cloud:1515;
   }
   upstream mycluster {
   hash $remote_addr consistent;
       server chickenj0.cloud:1514;
   }
   server {
       listen 1515;
       proxy_pass master;
   }
   server {
       listen 1514;
       proxy_pass mycluster;
   }
}